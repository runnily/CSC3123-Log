{% extends '@content/page.twig' %}


{% block meta %}
{# <meta> for things like keywords etc.#}
{% endblock meta %}

{% block scripts %}
<script src="{{assets}}/js/findNote.js"></script>
{% endblock scripts %}

{% block setup %}
{# Any javascript you need that is NOT run on load goes in this block. ***NB you don't need <script></script> tags here*** #}
{% endblock setup %}

{% block onload %}
{# Any javascript you need that MUST run on load goes in this block. ***NB you don't need <script></script> tags here*** #}
{% endblock onload %}


{% block header %}
    <a class="text-white bg-danger border-primary rounded m-0 p-3" href="{{deletePrj}}">
            <i class="fas fa-trash-alt"></i> delete
    </a>
    <div class="d-flex w-100 justify-content-center">
        <article class="p-2 d-flex justify-content-center">
            <form>
                <input id="updateT" class="form-control form-control-lg w-80" onkeyup="project(/title/this.value)" type="text" placeholder="{{projectName}}">
                <input id="updateS" class="form-control mt-2" type="text" onkeyup="project(/summary/this.value)" placeholder="{{projectSummary}}">
            </form>
            <aside class="spinner-border text-success m-2" id="state" role="status">
                    <span class="sr-only">Loading...</span>
            </aside>
        </article>
    </div>
{% endblock header %}

{% block main %}

    {% include '@util/message.twig' %}
    {% import '@util/formmacro.twig' as f %}

    <ul class="nav nav-tabs">
            <li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#notes">Notes</a></li>
            <li class="nav-item"><a class="nav-link" data-toggle="tab" href="#users">Users</a></li>
    </ul>

    <div class="modal fade" id="add-note" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Note</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {{f.startform({method: 'post', multi: TRUE, class:'form-group'})}}
                        {{f.text({label: 'Title', id: 'title', name: 'title', ph: 'Input title here', required: 'true' })}}
                        {{f.text({label: 'Summary', id: 'summary', name: 'summary', ph: 'Input summary here' })}}
                        {{f.file({id: 'f0', name: 'myfile', label: 'File'})}}
                        {{f.number({min: '0', name: 'time', label: 'Minutes', ph: 'Minutes spent'})}}
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                {{f.submit({value: 'Add'})}}
                        </div>
                    {{f.endform()}}
                </div>
            </div> 
        </div>
    </div>
        
    <div class="modal fade" id="add-user" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Add user</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    {{f.startform({method: 'post', multi: TRUE})}}
                        {{f.text({label: 'Username', id: 'username', name: 'username', ph: 'username' })}}
                        {{f.checkbox({class: 'cbc', labels: ['Make Admin'], ids: ['admin'], names: ['admin'], values: ['TRUE']})}}
                        <br/>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            {{f.submit({value: 'Add'})}}
                        </div>
                    {{f.endform()}}
                </div>
            </div> 
        </div>
    </div>

    <section class="tab-content">
        <article id="notes" class="col-md-8 tab-pane fade show active">
            <br/>
            <button type="button" class="text-white btn bg-secondary " data-toggle="modal" data-target="#add-note"> 
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                </svg>
                New note
            </button>
            <ul data-project="{{projectid}}" class="mt-3 mr-0" id='note'> </ul>     
        </article>
        <article id="users" class="col-md-8 tab-pane fade">
            <br/>
                <button type="button" class="text-white btn bg-secondary" data-toggle="modal" data-target="#add-user"> 
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                        </svg>
                        Add user
                </button>
            <ul class="users mt-3 mr-0" id="user"></ul>
        </article>
    </section>
{% endblock main %}


