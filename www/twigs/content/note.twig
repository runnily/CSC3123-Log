{% extends '@content/page.twig' %}

{% block meta %}
{# <meta> for things like keywords etc.#}
{% endblock meta %}

{% block css %}
{# <link> for any other CSS files you need #}
{% endblock css %}


{% block scripts %}
{# <script src=""></script> for any other JS files you need #}
{% endblock scripts %}

{% block setup %}
{# Any javascript you need that is NOT run on load goes in this block. ***NB you don't need <script></script> tags here*** #}
{% endblock setup %}

{% block header %}
    <article class="col-md-12">
        <h1 class="text-center">Edit {{action}}</h1>
        <h2 class="text-center">{{note.title}}</h2>
    </article>
{% endblock header %}

{% block main %}
    {% include '@util/message.twig' %}
    <section class="row">
        <article class="ml-auto col-md-8 mr-auto">
        <div class="modal-body">
        {% import '@util/formmacro.twig' as f %}
        {{f.startform({method: 'post', multi: TRUE})}}
            {{f.text({label: 'Title', id: 'title', name: 'title', ph: note.title })}}
            {{f.text({label: 'Summary', id: 'summary', name: 'summary', ph: note.summary })}}
            <h5> Your files </h5>
            <ul class="list-group">
            {% for upload in uploads %}
                {% set type = upload.filename|split('.') %}
                {% set type = type[type|length - 1] %}
                <li class="list-group-item">
                    {% if type in ['png', 'gif', 'tiff', 'jpg'] %}
                        <i class="far fa-image"></i>
                    {% elseif type in ['doc', 'docx'] %}
                        <i class="far fa-file-word"></i>
                    {% elseif type == 'pdf' %} 
                        <i class="far fa-file-pdf"></i>
                    {% else %}
                        <i class="far fa-file"></i>
                    {% endif %}
                    <a href="{{download}}/{{upload.id}}">
                        {{upload.filename}}
                    </a>
                    <a href="{{delete}}/{{upload.id}}">
                        <small> delete </small>
                    <a>
                </li>
            {% endfor %}
            </ul>
            <br>
            {{f.file({id: 'f0', name: 'myfile', label: 'Upload more files'})}}
            {{f.number({min: '1', name: 'time', label: 'Time spent (minutes)', ph: note.minutes})}}
            <div class="modal-footer">
                <a href="{{base}}/projects"><button type="button" class="btn btn-primary">back</button></a>
                <button onclick="location.href='http://www.example.com'" type="button">
                {{f.submit({value: 'Save changes'})}}
            </div>
        {{f.endform()}}
        </article>
    </section>
{% endblock main %}

{% block footer %}
    <article class="col-md-12">
    </article>
{% endblock footer %}
